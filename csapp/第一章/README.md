### 第一章 计算机系统漫游

#### 引言

计算机系统是由**硬件**和**系统软件**组成的,它们共同工作来运行应用程序.

#### 1.1 信息就是位+上下文

hello程序的生命周期是从一个**源程序**开始的,即程序员通过编辑器创建并保存的文本文件,文件名是hello.c.也是一个比特序列.

区分不同数据对象的唯一方法是我们读到这些数据对象时的上下文.比如,在不同的上下文中,一个同样的字节序列可能表示一个整数,浮点数,字符串或者机器指令.

#### 1.2 程序被其他程序翻译成不同的格式

为了在系统上运行hello.c程序,每条C语句都必须被其他程序转化为一系列的低级机器语言指令.然后这些指令按照一种称为可执行目标程序的格式打好包,并以二进制磁盘文件的形式存放起来.目标程序也成为可执行目标文件.

在Unix系统上,从源文件到目标文件的转化是由编译器驱动程序完成的:

linux> gcc -o hello hello.c

![1](https://i.loli.net/2020/07/11/tavni1F3OQq9wZR.png)

#### 1.7 进程

一个CPU看上去都像是并发地执行多个进程,这是通过处理器在进程间切换来实现的.操作系统实现这种交错执行的进程称为**上下文切换.**]

操作系统保持跟踪进程运行所需的所有状态信息.这种状态,也就是**上下文**,包括很多信息,比如PC和寄存器文件的当前值,以及主存的内容.

#### 1.7.2 进程

一个进程实际上可以由多个称为线程的执行单元组成,每个线程都运行在进程的上下文中,并共享同样的代码和全局数据.

#### 1.7.3 虚拟内存

虚拟内存是一个抽象概念,它为每个进程提供了一个假象,即每个进程都在独占地使用主存.每个进程看见的内存都是一致的,称为虚拟地址空间.

虚拟地址空间由大量精确定义的区构成.

从最低的地址开始:

* 程序代码和数据
* 堆
* 共享库
* 栈
* 内核虚拟空间

#### 1.9.1 Amdahl定律

> S=1/(1-a+a/n)

主要观点:  要想显著加速整个系统,必须提升全系统中相当大的部分的速度.

#### 1.9.2 并发与并行

* 并发是指一个同时具有多个活动的系统,其目的是让计算机做的更多
* 并行则是指用并发来使一个系统运行得更快,目的是让计算机运行的更快.

主要是三个层次

* 线程级并发
* 指令级并行
* 单指令、多数据并行

#### 1.9.3 抽象

操作系统内核就是应用程序和硬件之间的媒介.它提供了三个基本的抽象:

1. 文件是对I/O设备的抽象
2. 虚拟内存是对主存和磁盘的抽象
3. 进程是处理器、主存和I/O设备的抽象.